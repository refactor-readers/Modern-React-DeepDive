# 8장. ESLint를 활용한 정적 코드 분석

## ESLint 살펴보기

ESLint는 js코드는 어떻게 분석할까
1. js코드를 문자열로 읽는다.
2. js코드를 분석할 수 있는 파서(parser)로 코드를 구조화한다.
3. 2번에서 구조화한 트리를 AST라하며, 이 구조화된 트리를 기준으로 각종 규칙과 대조한다
4. 규칙과 대조했을 때 이를 위반한 코드를 알리거나 수정한다.

### eslint-plugin

eslint-plugin이라는 접두사로 시작하는 플러그인은 앞서 언급했던 규칙을 모아놓은 패키지다

### eslint-config

리액트, import와 같이 특정 프레임워크나 도메인과 관련된 규칙을 묶어서 제공하는 패키지라면 eslint-config는 이러한 eslint-plugin을 한데 묶어서 완벽하게 한 세트로 제공하는 패키지라 할 수 있다.

- eslint-config-airbnb
- titicaca/triple-config-kit
- eslint-config-next

### 주의할 점

#### Prettier와의 충돌

Prettier는 코드의 포매팅을 도와주는 도구다. 포매팅과 관련된 작업, 줄바꿈, 들여쓰기, 작은따옴표와 큰따옴표 등을 담당한다.

ESLint에서도 Prettier에서 처리하는 작업을 처리할 수 있기 때문에 두 가지 모두를 js코드에서 실행한다면 서로 충돌하는 규칙으로 인해 에러가 발생하고, 최악의 경우 ESLint, Prettier 모두 만족하지 못하는 코드가 만들어질 수도 있다.

해결방법으로는

- 서로 규칙이 충돌되지 않게끔 규칙을 잘 선언하는 것
  - Prettier에서 제공하는 규칙을 어기지 않도록, ESLint에서는 해당 규칙을 끄는 방법
- js나 ts는 ESlint에 그 외의 파일은 모두 Prettier에 맡기는 것

#### 규칙에 대한 예외 처리, 그리고 react-hooks/no-exhaustive-deps

해당 주석 사용 시 특정 주만 제외하거나, 파일 전체를 제외하거나, 특정 범위에 걸쳐 제외하는 것이 가능하다

이를 사용하면 경고를 제외하는게 대부분 위험한 발상이며 어떤 경우가 있는지 살펴보겠다

- 괜찮다고 임의로 판단한 경우
- 의존성 배열이 너무 긴 경우
- 마운트 시점에 한 번만 실행하고 싶은 경우

## 리액트 팀이 권장하는 리액트 테스트 라이브러리

### 리액트 컴포넌트 테스트 코드 작성하기

리액트 컴포넌트를 태스트하는 순서는

1. 컴포넌트를 렌더링한다.
2. 필요하다면 컴포넌트에서 특정 액션을 수행한다.
3. 컴포넌트 렌더링과 2번의 액션을 통해 기대하는 결과와 실제 결과를 비교한다.

### 그 밖에 해볼 만한 여러 가지 테스트

- 유닛 테스트: 각각의 코드나 컴포넌트가 독립적으로 분리된 환경에서 의도된 대로 정확히 작동하는지 검증하는 테스트
- 통합 테스트: 유닛 테스트를 통과한 여러 컴포넌트가 묶여서 하나의 기능으로 정상적으로 작동하는지 확인하는 테스트
- 엔드 투 엔드: 흔히 E2E 테스트라 하며, 실제 사용자처럼 작동하는 로봇을 활용해 애플리케이션의 전체적인 기능을 확인하는 테스트


