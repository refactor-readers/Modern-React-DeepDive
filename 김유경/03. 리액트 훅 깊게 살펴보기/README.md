# hookì˜ ë„ì… ë°°ê²½

- í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ê°€ ìƒíƒœë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì˜ ìƒëª…ì£¼ê¸° ë©”ì„œë“œë¥¼ ëŒ€ì²´í•˜ëŠ” ë“±ì˜ ë‹¤ì–‘í•œ ì‘ì—…ì„ í•˜ê¸° ìœ„í•´ í›…ì´ ì¶”ê°€ ë¨
- í›…ì„ í™œìš©í•˜ë©´ í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ê°€ ì•„ë‹ˆë”ë¼ë„ ë¦¬ì•¡íŠ¸ì˜ ë‹¤ì–‘í•œ ê¸°ëŠ¥ í™œìš©ì´ ê°€ëŠ¥

# 1. ë¦¬ì•¡íŠ¸ì˜ ëª¨ë“  í›… íŒŒí—¤ì¹˜ê¸° (ë‚‹ê²¨ë³´ì)

ë¦¬ì•¡íŠ¸ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê°œë…ì´ ë°”ë¡œ í›…

- í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ê°€ëŠ¥í–ˆë˜ state, ref ë“± ë¦¬ì•¡íŠ¸ì˜ í•µì‹¬ì ì¸ ê¸°ëŠ¥ì„ í•¨ìˆ˜ì—ì„œë„ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¬
- ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ë³´ë‹¤ "ê°„ê²°"í•˜ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒ

## 1.1 useState

í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ìƒíƒœë¥¼ ì •ì˜í•˜ê³  ì´ ìƒíƒœë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í›…

**useState êµ¬í˜„ ì‚´í´ë³´ê¸°**

```tsx
import { useState } from "react";

const [state, setState] = useState(initialState);
```

- useStateì˜ ì¸ìˆ˜ë¡œ ì´ˆê¹ƒê°’ì„ ì „ë‹¬, ì—†ìœ¼ë©´ undefined
- useState í›…ì˜ ë°˜í™˜ ê°’ì€ ë°°ì—´
  - ì²« ë²ˆì§¸ ì›ì†ŒëŠ” state ê°’ ìì²´
  - ë‘ ë²ˆì§¸ ì›ì†ŒëŠ” setState í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ í•´ë‹¹ stateì˜ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆìŒ

**useStateë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ìì²´ì ìœ¼ë¡œ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•´ ìƒíƒœê°’ì„ ê´€ë¦¬í•  ë•Œ**

```tsx
function Component() {
  let stater = "hello";

  function handleButtonClick() {
    state = "hi";
  }

  return (
    <>
      <h1>{state}</h1>
      <button onClick={handleButtonClick}>hi</button>
    </>
  );
}
```

ìœ„ ì½”ë“œëŠ” ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.

why?

- ìœ„ ì½”ë“œëŠ” ë¦¬ë Œë”ë§ì„ ë°œìƒì‹œí‚¤ê¸° ìœ„í•œ ì¡°ê±´ì„ ì „í˜€ ì¶©ì¡±í•˜ì§€ ëª»í•˜ê³  ìˆë‹¤.

**ë¦¬ì•¡íŠ¸ì˜ ë Œë”ë§**

=> ë¦¬ì•¡íŠ¸ì˜ ë Œë”ë§ì€ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì˜ returnê³¼ í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì˜ render í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ ë‹¤ìŒ, ì´ ì‹¤í–‰ ê²°ê³¼ë¥¼ ì´ì „ì˜ ë¦¬ì•¡íŠ¸ íŠ¸ë¦¬ì™€ ë¹„êµí•´ ë¦¬ë Œë”ë§ì´ í•„ìš”í•œ ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸ í•œë‹¤.

```tsx
function Component() {
  const [_, triggerRender] = useState();

  let stater = "hello";

  function handleButtonClick() {
    state = "hi";
    triggerRender();
  }

  return (
    <>
      <h1>{state}</h1>
      <button onClick={handleButtonClick}>hi</button>
    </>
  );
}
```

- useStateì˜ ë°˜í™˜ê°’ì˜ ë‘ ë²ˆì§¸ ì›ì†Œë¥¼ ì‹¤í–‰í•´ ë¦¬ì•¡íŠ¸ì—ì„œ ë Œë”ë§ì´ ì¼ì–´ë‚˜ê²Œë” ë³€ê²½í–ˆë‹¤.
- ê·¸ëŸ¼ì—ë„ ì—¬ì „íˆ ë²„íŠ¼ í´ë¦­ì‹œ stateì˜ ë³€ê²½ëœ ê°’ì´ ë Œë”ë§ ë˜ê³  ìˆì§€ ì•Šë‹¤.

why?

- ë¦¬ì•¡íŠ¸ì˜ ë Œë”ë§ì€ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°˜í™˜í•œ ê²°ê³¼ë¬¼ì¸ returnì˜ ê°’ì„ ë¹„êµí•´ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì´ë‹¤.
- ì¦‰, ë§¤ë²ˆ ë Œë”ë§ì´ ë°œìƒí•  ë•Œë§ˆë‹¤ í•¨ìˆ˜ëŠ” ìƒˆë¡­ê²Œ ì‹¤í–‰ë˜ê³ , ìƒˆë¡­ê²Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ì—ì„œ stateëŠ” ë§¤ë²ˆ helloë¡œ ì´ˆê¸°í™”ë˜ê¸° ë•Œë¬¸ì— ì•„ë¬´ë¦¬ stateë¥¼ ë³€ê²½í•´ë„ ë‹¤ì‹œ helloë¡œ ì´ˆê¸°í™”ë˜ëŠ” ê²ƒì´ë‹¤.

**â“ ê·¸ë ‡ë‹¤ë©´ useState í›…ì˜ ê²°ê´ê°’ì€ ì–´ë–»ê²Œ í•¨ìˆ˜ê°€ ì‹¤í–‰ë¼ë„ ê·¸ ê°’ì„ ìœ ì§€í•˜ê³  ìˆì„ê¹Œ?**

```tsx
function useState(initialValue) {
  let internalState = initialValue;

  function setState(newValue) {
    internalState = newValue;
  }

  return [internalState, setState];
}
```

ì‰½ê²Œ ìƒìƒí•  ìˆ˜ ìˆëŠ” í˜•íƒœì˜ useStateëŠ” ìœ„ì™€ ê°™ì§€ë§Œ ì´ëŠ” ì›í•˜ëŠ” ëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.

why?

- setValueë¡œ ê°’ì„ ë³€ê²½í–ˆìŒì—ë„ ì´ë¯¸ êµ¬ì¡° ë¶„í•´í• ë‹¹ìœ¼ë¡œ stateì˜ ê°’, ì¦‰ valueë¥¼ ì´ë¯¸ í• ë‹¹í•´ ë†“ì€ ìƒíƒœì´ê¸° ë•Œë¬¸ì— í›… ë‚´ë¶€ì˜ setStateë¥¼ í˜¸ì¶œí•˜ë”ë¼ë„ ë³€ê²½ëœ ìƒˆë¡œìš´ ê°’ì„ ë°˜í™˜í•˜ì§€ëŠ” ëª»í•œ ê²ƒ
- ì´ë¥¼ í•´ê²°í•˜ë ¤ë©´ ë¨¼ì € stateë¥¼ í•¨ìˆ˜ë¡œ ë°”ê¿”ì„œ stateì˜ ê°’ì„ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ í˜„ì¬ stateë¥¼ ë°˜í™˜í•˜ê²Œ í•˜ë©´ ëœë‹¤.

```tsx
function useState(initialValue) {
  let internalState = initialValue;

  function state() {
    return internalState;
  }

  function setState(newValue) {
    internalState = newValue;
  }

  return [internalState, setState];
}
```

ë¦¬ì•¡íŠ¸ëŠ” í´ë¡œì €ë¥¼ í™œìš©í•˜ì—¬ useStateê°€ í˜¸ì¶œëœ ì´í›„ì—ë„ ê³„ì†í•´ì„œ ì§€ì—­ ë³€ìˆ˜ì¸ stateë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í–ˆë‹¤.

```tsx
const MyReact = function () {
  const global = {};
  let index = 0;

  function useState(initialState) {
    if (!global.states) {
      // ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì˜ states ë°°ì—´ì„ ì´ˆê¸°í™”í•œë‹¤.
      // ìµœì´ˆ ì ‘ê·¼ì´ë©´ ë¹ˆ ë°°ì—´ë¡œ ì´ˆê¸°í™”í•œë‹¤.
      global.states = [];
    }

    // states ì •ë³´ë¥¼ ì¡°íšŒí•´ì„œ í˜„ì¬ ìƒíƒœê°’ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ë‹¤ë©´ ì´ˆê¹ƒê°’ìœ¼ë¡œ ì„¤ì •í•œë‹¤.
    const currentState = global.states[index] || initialState;
    // statesì˜ ê°’ì„ ìœ„í•´ì„œ, ì¡°íšŒí•œ í˜„ì¬ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•œë‹¤.
    global.states[index] = currentState;

    // ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ë¡œ setterë¥¼ ë§Œë“ ë‹¤.
    const setState = (function () {
      // í˜„ì¬ indexë¥¼ í´ë¡œì €ë¡œ ê°€ë‘¬ë†”ì„œ ì´í›„ì—ë„ ê³„ì†í•´ì„œ ë™ì¼í•œ indexì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
      let currentIndex = index;
      return function (value) {
        global.states[currentIndex] = value;
        // ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•œë‹¤. ì‹¤ì œë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§ í•˜ëŠ” ì½”ë“œëŠ” ìƒëµí–ˆë‹¤.
      };
    })();
    // useStateë¥¼ ì“¸ ë•Œë§ˆë‹¤ indexë¥¼ í•˜ë‚˜ì”© ì¶”ê°€í•œë‹¤. ì´ indexëŠ” setStateì—ì„œ ì‚¬ìš©ëœë‹¤.
    // ì¦‰, í•˜ë‚˜ì˜ stateë§ˆë‹¤ indexê°€ í• ë‹¹ë¼ ìˆì–´ ê·¸  indexê°€ ë°°ì—´ì˜ ê°’ (global.states)ì„
    // ê°€ë¦¬í‚¤ê³  í•„ìš”í•  ë•Œë§ˆë‹¤ ê·¸ ê°’ì„ ê°€ì ¸ì˜¤ê²Œ í•œë‹¤.
    index = index + 1;

    return [currentState, setState];
  }
};
```

#### í´ë¡œì €

í•¨ìˆ˜ì˜ ì‹¤í–‰ì´ ëë‚¬ìŒì—ë„ í•¨ìˆ˜ê°€ ì„ ì–¸ëœ í™˜ê²½ì„ ê¸°ì–µí•  ìˆ˜ ìˆëŠ” ë°©ë²•

- ë§¤ë²ˆ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œ stateì˜ ê°’ì„ ìœ ì§€í•˜ê³  ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ë¦¬ì•¡íŠ¸ëŠ” í´ë¡œì €ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤.

#### `__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED` ì˜ë¦¬ê³  ì‹¶ëƒ?

ë¦¬ì•¡íŠ¸ì—ì„œ ë³€ìˆ˜ëª…ì„ ì´ë ‡ê²Œ ë¬´ì„­ê²Œ ì§€ì€ ì´ìœ ëŠ” ì¼ë°˜ ì‚¬ìš©ìì˜ ì ‘ê·¼ì„ ì°¨ë‹¨í•˜ê³ , ì‹¤ì œ í”„ë¡œë•ì…˜ ì½”ë“œì—ì„œ ì‚¬ìš©í•˜ì§€ ëª»í•˜ê²Œ í•˜ê¸° ìœ„í•¨ì´ë‹¤.

#### ê²Œìœ¼ë¥¸ ì´ˆê¸°í™”

useStateì˜ ê¸°ë³¸ê°’ìœ¼ë¡œ `íŠ¹ì •í•œ ê°’ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜`ë¥¼ ë„˜ê¸°ëŠ” ê²ƒì„ ë³´ê³  ê²Œìœ¼ë¥¸ ì´ˆê¸°í™”ë¼ê³  í•œë‹¤.

- ê³µì‹ ë¬¸ì„œì—ì„œëŠ” useStateì˜ ì´ˆê¹ƒê°’ì´ ë³µì¡í•˜ê±°ë‚˜ ë¬´ê±°ìš´ ì—°ì‚°ì„ í¬í•¨í•˜ê³  ìˆì„ ë•Œ ì‚¬ìš©í•˜ë¼ê³  ê¶Œì¥í•œë‹¤.
- ê²Œìœ¼ë¥¸ ì´ˆê¸°í™” í•¨ìˆ˜ëŠ” stateê°€ ì²˜ìŒ ë§Œë“¤ì–´ì§ˆ ë•Œë§Œ ì‚¬ìš©ë˜ê³ , ì´í›„ì— ë¦¬ë Œë”ë§ì´ ë°œìƒí•˜ë©´ ë¬´ì‹œëœë‹¤.

ê²Œìœ¼ë¥¸ ì´ˆê¸°í™”ë¥¼ í™œìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•

- `Number.parseInt(window.localStorage.getItem(cacheKey))`ì™€ ê°™ì´ í•œ ë²ˆ ì‹¤í–‰ë˜ëŠ” ë° ì–´ëŠ ì •ë„ ë¹„ìš©ì´ ë“œëŠ” ê°’ì´ ìˆë‹¤ê³  í•  ë•Œ
- useStateì˜ ì¸ìˆ˜ë¡œ ì´ ê°’ ìì²´ë¥¼ ì‚¬ìš©í•˜ë©´ ì´ˆê¹ƒê°’ì´ í•„ìš”í•œ ìµœì´ˆ ë Œë”ë§, ì´ˆê¸°ê°’ì´ ìˆì–´ ë” ì´ìƒ ë Œë”ë§ì´ í•„ìš” ì—†ëŠ” ë¦¬ë Œë”ë§ ì‹œì—ë„ ë™ì¼í•˜ê²Œ ê³„ì† í•´ë‹¹ ê°’ì— ì ‘ê·¼í•´ì„œ ë‚­ë¹„ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì´ëŸ´ ë•ŒëŠ” ì˜¤íˆë ¤ í•¨ìˆ˜ í˜•íƒœë¡œ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ê²½ì œì ì¼ ìˆ˜ ìˆë‹¤.
- `localStorage`, `sessionStorage`ì— ëŒ€í•œ ì ‘ê·¼
- map, filter, find ê°™ì€ ë°°ì—´ì— ëŒ€í•œ ì ‘ê·¼
- ì´ˆê¹ƒê°’ ê³„ì‚°ì„ ìœ„í•´ í•¨ìˆ˜ í˜¸ì¶œì´ í•„ìš”í•  ë•Œ

## 1.2 useEffect

ì¼ë°˜ì ì¸ ì •ì˜

- ë‘ ê°œì˜ ì¸ìˆ˜ë¥¼ ë°›ëŠ”ë°, ì²« ë²ˆì§¸ëŠ” ì½œë°±, ë‘ ë²ˆì§¸ëŠ” ì˜ì¡´ì„± ë°°ì—´ì´ë‹¤. ì´ ë‘ ë²ˆì§¸ ì˜ì¡´ì„± ë°°ì—´ì˜ ê°’ì´ ë³€ê²½ë˜ë©´ ì²« ë²ˆì§¸ ì¸ìˆ˜ì¸ ì½œë°±ì„ ì‹¤í–‰í•œë‹¤.
- í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì˜ ìƒëª…ì£¼ê¸° ë©”ì„œë“œì™€ ë¹„ìŠ·í•œ ì‘ë™ì„ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ë‘ ë²ˆì§¸ ì˜ì¡´ì„± ë°°ì—´ì— ë¹ˆ ë°°ì—´ì„ ë„£ìœ¼ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œë§Œ ì‹¤í–‰ëœë‹¤.
  => âŒ ìƒëª… ì£¼ê¸° ë©”ì„œë“œë¥¼ ëŒ€ì²´í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ í›…ë„ ì•„ë‹ˆë‹¤.
- useEffectëŠ” í´ë¦°ì—… í•¨ìˆ˜ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆëŠ”ë°, ì´ í´ë¦°ì—… í•¨ìˆ˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ ë  ë•Œ ì‹¤í–‰ëœë‹¤.

=> ìœ„ì˜ ì •ì˜ë“¤ì€ ì–´ëŠ ì •ë„ ì˜³ì§€ë§Œ ì •í™•í•˜ì§€ëŠ” ì•Šë‹¤.

#### ğŸ’¡ ì •í™•í•œ ì •ì˜

ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ ì»´í¬ë„ŒíŠ¸ì˜ ì—¬ëŸ¬ ê°’ë“¤ì„ í™œìš©í•´ ë™ê¸°ì ìœ¼ë¡œ ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ë§Œë“œëŠ” ë©”ì»¤ë‹ˆì¦˜ì´ë‹¤.

- ì´ ë¶€ìˆ˜ íš¨ê³¼ê°€ 'ì–¸ì œ' ì¼ì–´ë‚˜ëŠ”ì§€ë³´ë‹¤ 'ì–´ë–¤ ìƒíƒœê°’ê³¼ í•¨ê»˜ ì‹¤í–‰ë˜ëŠ”ì§€'ë¥¼ ë³´ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.

#### useEffectë€?

```tsx
// ì¼ë°˜ì ì¸ í˜•íƒœ
function Component() {
  //...

  useEffect(() => {
    // do something
  }, [props, state]);
  // ...
}
```

- ì²« ë²ˆì§¸ ì¸ìˆ˜ë¡œëŠ” ë¶€ìˆ˜ íš¨ê³¼ê°€ í¬í•¨ëœ í•¨ìˆ˜
- ë‘ ë²ˆì§¸ ì¸ìˆ˜ë¡œëŠ” ì˜ì¡´ì„± ë°°ì—´

- ë‘ ë²ˆì§¸ ì¸ìˆ˜ë¥¼ ìƒëµí•  ìˆ˜ë„, ì•„ì£¼ ê¸´ ë°°ì—´ì„ ë„£ì„ ìˆ˜ë„, ë¹ˆ ë°°ì—´ì„ ë„£ì„ ìˆ˜ë„ ìˆë‹¤.

#### ì˜ì¡´ì„± ë°°ì—´ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ useEffectì˜ ì½œë°±ì„ ì‹¤í–‰

ê·¸ë ‡ë‹¤ë©´ useEffectëŠ” ì–´ë–»ê²Œ ì˜ì¡´ì„± ë°°ì—´ì´ ë³€ê²½ëœ ê²ƒì„ ì•Œê³  ì‹¤í–‰ë ê¹Œ?

- âœï¸ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ëŠ” ë§¤ë²ˆ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´ ë Œë”ë§ì„ ìˆ˜í–‰í•œë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•´ì•¼ í•œë‹¤.

```tsx
// ì¼ë°˜ì ì¸ í˜•íƒœ
function Component() {
  const [counter, setCounter] = useState(0);

  function handleClick() {
    setCounter((prev) => prev + 1);
  }

  return (
    <>
      <h1>{counter}</h1>
      <button onClick={handleClick}>+</button>
    </>
  );
}
```

- ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ counterì— ê°’ì„ 1ì”© ì˜¬ë¦¬ëŠ” í‰ë²”í•œ ì»´í¬ë„ŒíŠ¸ë‹¤.
- í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ëŠ” ë Œë”ë§ ì‹œë§ˆë‹¤ ê³ ìœ ì˜ stateì™€ propsë¥¼ ê°–ê³  ìˆë‹¤. ì—¬ê¸°ì— useEffectê°€ ì¶”ê°€ëœë‹¤ë©´ ì•„ë˜ì™€ ê°™ì€ í˜•íƒœê°€ ëœë‹¤.

```tsx
// ì¼ë°˜ì ì¸ í˜•íƒœ
function Component() {
  const [counter, setCounter] = useState(0);

  useEffect(() => {
    console.log(counter);
  });

  function handleClick() {
    setCounter((prev) => prev + 1);
  }

  return (
    <>
      <h1>{counter}</h1>
      <button onClick={handleClick}>+</button>
    </>
  );
}
```

useEffectëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ proxyë‚˜ ë°ì´í„° ë°”ì¸ë”©, ì˜µì €ë²„ ê°™ì€ íŠ¹ë³„í•œ ê¸°ëŠ¥ì„ í†µí•´ ê°’ì˜ ë³€í™”ë¥¼ ê´€ì°°í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆê³  ë Œë”ë§ í•  ë•Œë§ˆë‹¤ ì˜ì¡´ì„±ì— ìˆëŠ” ê°’ì„ ë³´ë©´ì„œ ì´ ì˜ì¡´ì„±ì˜ ê°’ì´ ì´ì „ê³¼ ë‹¤ë¥¸ ê²Œ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ì‹¤í–‰í•˜ëŠ” í‰ë²”í•œ í•¨ìˆ˜ë¼ ë³¼ ìˆ˜ ìˆë‹¤.

- ë”°ë¼ì„œ useEffectëŠ” stateì™€ propsì˜ ë³€í™” ì†ì—ì„œ ì¼ì–´ë‚˜ëŠ” ë Œë”ë§ ê³¼ì •ì—ì„œ ì‹¤í–‰ë˜ëŠ” ë¶€ìˆ˜ íš¨ê³¼ í•¨ìˆ˜ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.

#### í´ë¦°ì—… í•¨ìˆ˜ì˜ ëª©ì 

```tsx
import { useState, useEffect } from "react";

export default function App() {
  const [counter, setCounter] = useState(0);

  function handleClick() {
    setCounter((prev) => prev + 1);
  }

  useEffect(() => {
    function addMouseEvent() {
      console.log(counter);
    }

    window.addEventListener("click", addMouseEvent);

    // í´ë¦°ì—… í•¨ìˆ˜ (Cleanup function)
    return () => {
      console.log("í´ë¦°ì—… í•¨ìˆ˜ ì‹¤í–‰!", counter);
      window.removeEventListener("click", addMouseEvent);
    };
  }, [counter]);

  return (
    <>
      <h1>{counter}</h1>
      <button onClick={handleClick}>+</button>
    </>
  );
}
```

```
í´ë¦°ì—… í•¨ìˆ˜ ì‹¤í–‰! 0
1

í´ë¦°ì—… í•¨ìˆ˜ ì‹¤í–‰! 1
2

í´ë¦°ì—… í•¨ìˆ˜ ì‹¤í–‰! 2
3

í´ë¦°ì—… í•¨ìˆ˜ ì‹¤í–‰! 2
4

//
```

í´ë¦°ì—… í•¨ìˆ˜ëŠ” ì´ì „ counter ê°’, ì¦‰ ì´ì „ stateë¥¼ ì°¸ì¡°í•´ ì‹¤í–‰ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.

- í´ë¦°ì—… í•¨ìˆ˜ëŠ” ìƒˆë¡œìš´ ê°’ê³¼ í•¨ê»˜ ë Œë”ë§ëœ ë’¤ì— ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ìœ„ì™€ ê°™ì€ ë©”ì‹œì§€ê°€ ë‚˜íƒ€ë‚œë‹¤.

#### ğŸ’¡ ì¤‘ìš”í•œ ì 

í´ë¦°ì—… í•¨ìˆ˜ëŠ” ë¹„ë¡ ìƒˆë¡œìš´ ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ë Œë”ë§ ë’¤ì— ì‹¤í–‰ë˜ì§€ë§Œ ì´ ë³€ê²½ëœ ê°’ì„ ì½ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í•¨ìˆ˜ê°€ ì •ì˜ëì„ ë‹¹ì‹œì— ì„ ì–¸ëë˜ ì´ì „ ê°’ì„ ë³´ê³  ì‹¤í–‰ëœë‹¤ëŠ” ê²ƒì´ë‹¤.

```tsx
// ìµœì´ˆ ì‹¤í–‰
useEffect(() => {
  function addMouseEvent() {
    console.log(1);
  }

  window.addEventListener("click", addMouseEvent);

  // í´ë¦°ì—… í•¨ìˆ˜
  // ê·¸ë¦¬ê³  ì´ í´ë¦°ì—… í•¨ìˆ˜ëŠ” ë‹¤ìŒ ë Œë”ë§ì´ ëë‚œ ë’¤ì— ì‹¤í–‰ëœë‹¤.
  return () => {
    console.log("í´ë¦°ì—… í•¨ìˆ˜ ì‹¤í–‰!", 1);
    window.removeEventListener("click", addMouseEvent);
  };
}, [counter]);
//
// ...
// ì´í›„ ì‹¤í–‰

useEffect(() => {
  function addMouseEvent() {
    console.log(2);
  }

  window.addEventListener("click", addMouseEvent);

  // í´ë¦°ì—… í•¨ìˆ˜ (Cleanup function)
  return () => {
    console.log("í´ë¦°ì—… í•¨ìˆ˜ ì‹¤í–‰!", 2);
    window.removeEventListener("click", addMouseEvent);
  };
}, [counter]);
//
// ...
```

- í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì˜ useEffectëŠ” ê·¸ ì½œë°±ì´ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ì´ì „ì˜ í´ë¦°ì—… í•¨ìˆ˜ê°€ ì¡´ì¬í•œë‹¤ë©´ ê·¸ í´ë¦°ì—… í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ ë’¤ì— ì½œë°±ì„ ì‹¤í–‰í•œë‹¤. ë”°ë¼ì„œ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•˜ê¸° ì „ì— ì´ì „ì— ë“±ë¡í–ˆë˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì‚­ì œí•˜ëŠ” ì½”ë“œë¥¼ í´ë¦°ì—… í•¨ìˆ˜ì— ì¶”ê°€í•˜ëŠ” ê²ƒì´ë‹¤.

=> ì´ë¥¼ í†µí•´ íŠ¹ì • ì´ë²¤íŠ¸ì˜ í•¸ë“¤ëŸ¬ê°€ ë¬´í•œíˆ ì¶”ê°€ë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.

- ì–¸ë§ˆìš´íŠ¸ ê°œë…ê³¼ëŠ” ì°¨ì´ê°€ ìˆë‹¤.
  - ì–¸ë§ˆìš´íŠ¸ëŠ” íŠ¹ì • ì»´í¬ë„ŒíŠ¸ê°€ DOMì—ì„œ ì‚¬ë¼ì§„ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ëŠ” í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì˜ ìš©ì–´ì´ë‹¤.
  - í´ë¦°ì—… í•¨ìˆ˜ëŠ” ì–¸ë§ˆìš´íŠ¸ë¼ê¸°ë³´ë‹¤ëŠ” í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ëì„ ë•Œ ì˜ì¡´ì„± ë³€í™”ê°€ ìˆì—ˆì„ ë‹¹ì‹œ ì´ì „ì˜ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ”, ë§ ê·¸ëŒ€ë¡œ ì´ì „ ìƒíƒœë¥¼ ì²­ì†Œí•´ì£¼ëŠ” ê°œë…ìœ¼ë¡œ ë³´ëŠ” ê²ƒì´ ì˜³ë‹¤.

#### ì˜ì¡´ì„± ë°°ì—´

- ë¹ˆ ë°°ì—´

  - ë¦¬ì•¡íŠ¸ëŠ” ì´ useEffectëŠ” ë¹„êµí•  ì˜ì¡´ì„±ì´ ì—†ë‹¤ê³  íŒë‹¨í•´ ìµœì´ˆ ë Œë”ë§ ã…ˆìµí›„ì— ì‹¤í–‰ëœ ë‹¤ìŒë¶€í„°ëŠ” ë” ì´ìƒ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.

- ì•„ë¬´ëŸ° ê°’ë„ ë„˜ê²¨ì£¼ì§€ ì•Šì„ ë•Œ

  - ì˜ì¡´ì„±ì„ ë¹„êµí•  í•„ìš” ì—†ì´ ë Œë”ë§í•  ë•Œë§ˆë‹¤ ì‹¤í–‰ì´ í•„ìš”í•˜ë‹¤ê³  íŒë‹¨í•´ ë Œë”ë§ì´ ë°œìƒí•  ë•Œë§ˆë‹¤ ì‹¤í–‰ëœë‹¤.
  - ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ëëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©ë¨

- ì‚¬ìš©ìê°€ ì§ì ‘ ì›í•˜ëŠ” ê°’

â“ ì˜ì¡´ì„± ë°°ì—´ì´ ì—†ëŠ” useEffectê°€ ë§¤ ë Œë”ë§ë§ˆë‹¤ ì‹¤í–‰ëœë‹¤ë©´ ê·¸ëƒ¥ useEffect ì—†ì´ ì¨ë„ ë˜ëŠ”ê²Œ ì•„ë‹ê¹Œ?

```tsx
// 1
function Component() {
  console.log("ë Œë”ë§ ë¨");
}

// 2
function Component() {
  useEffect(() => {
    console.log("ë Œë”ë§ ë¨");
  });
}
```

1. ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ ê´€ì ì—ì„œ useEffectëŠ” í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë³´ì¥í•´ì¤€ë‹¤. useEffect ë‚´ë¶€ì—ì„œëŠ” window ê°ì²´ì˜ ì ‘ê·¼ì— ì˜ì¡´í•˜ëŠ” ì½”ë“œë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤.
2. useEffectëŠ” ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ì˜ ë¶€ìˆ˜ íš¨ê³¼, ì¦‰ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ì´ ì™„ë£Œëœ ì´í›„ì— ì‹¤í–‰ëœë‹¤.
   - ë°˜ë©´ ì§ì ‘ ì‹¤í–‰ì€ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ëŠ” ë„ì¤‘ì— ì‹¤í–‰ëœë‹¤.
   - ë”°ë¼ì„œ 1ë²ˆê³¼ëŠ” ë‹¬ë¦¬ ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ì˜ ê²½ìš°ì— ì„œë²„ì—ì„œë„ ì‹¤í–‰ëœë‹¤.
   - ì´ ì‘ì—…ì€ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì˜ ë°˜í™˜ì„ ì§€ì—°ì‹œí‚¤ëŠ” í–‰ìœ„ë‹¤. ì¦‰, ë¬´ê±°ìš´ ì‘ì—…ì¼ ê²½ìš° ë Œë”ë§ì„ ë°©í•´í•˜ë¯€ë¡œ ì„±ëŠ¥ì— ì•…ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤.

useEffectì˜ effectëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ì‚¬ì´ë“œ ì´í™íŠ¸, ì¦‰ ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ì˜ë¯¸í•œë‹¤ëŠ” ê²ƒì„ ëª…ì‹¬í•˜ì

useEffectëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ëœ í›„ì— ì–´ë– í•œ ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ì¼ìœ¼í‚¤ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” í›…ì´ë‹¤.

#### useEffectì˜ êµ¬í˜„

```tsx
const MyReact = (function () {
  const global = {};
  let index = 0;

  function useEffect(callback, dependencies) {
    const hooks = global.hooks;

    // ì´ì „ í›… ì •ë³´ê°€ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.
    let previousDependencies = hooks[index];

    // ë³€ê²½ëëŠ”ì§€ í™•ì¸
    // ì´ì „ ê°’ì´ ìˆë‹¤ë©´ ì´ì „ ê°’ì„ ì–•ì€ ë¹„êµë¡œ ë¹„êµí•´ ë³€ê²½ì´ ì¼ì–´ë‚¬ëŠ”ì§€ í™•ì¸í•œë‹¤.
    // ì´ì „ ê°’ì´ ì—†ë‹¤ë©´ ìµœì´ˆ ì‹¤í–‰ì´ë¯€ë¡œ ë³€ê²½ì´ ì¼ì–´ë‚œ ê²ƒìœ¼ë¡œ ê°„ì£¼í•´ ì‹¤í–‰ì„ ìœ ë„í•œë‹¤.
    let isDependenciesChanged = previousDependencies
      ? dependencies.some(
          (value, idx) => !Object.is(value, previousDependencies[idx])
        )
      : true;
  }
})();
```
