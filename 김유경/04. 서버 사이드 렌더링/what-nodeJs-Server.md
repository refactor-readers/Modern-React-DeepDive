책을 읽던 도중. 궁금해지는 것이 생겼습니다.
**"리액트 컴포넌트를 렌더링하는 Node.js 서버"** 에 대해서 말이죠

### 🤔 리액트 컴포넌트를 렌더링하는 Node.js 서버가 왜 필요할까요?

#### 왜 Node.js 서버가 리액트를 렌더링할까요?

일반적인 리액트 앱(CRA 등)은 브라우저가 빈 HTML을 받은 뒤, 자바스크립트를 실행해 화면을 그립니다.
이것이 SPA의 특징이죠.

하지만, Next.js는 Node.js 서버가 자바스크립트를 미리 실행해서 완성된 HTML을 브라우저에 보내줍니다.

이 과정을 **SSR(Server-Side-Rendering)** 또는 **Pre-rendering**이라고 합니다.

#### 서버의 주요 역할

- 컴포넌트 실행 : 리액트 코드를 서버에서 미리 실행하여 HTML 문자열로 반환합니다
- 데이터 패칭 : `fetch` 등을 통해 DB나 API 서버에서 데이터를 미리 가져와 컴포넌트에 주입합니다
- 보안 : API키나 DB 접근 권한처럼 브라우저에 노출되면 안되는 로직을 서버 환경에서 안전하게 처리합니다

#### 렌더링 과정 (SSR기준)

- 사용자 요청 : 사용자가 특정 URL(예 : `/profile`)에 접속합니다.
- 서버 사이드 실행 : Node.js 서버가 해당 페이지의 리액트 컴포넌트를 호출합니다.
- HTML 생성 : 서버는 컴포넌트의 결과물을 HTML로 생성합니다. 이때 데이터가 포함된 상태입니다.
- 응답 : 서버가 완성된 HTML을 브라우저로 보냅니다. (사용자는 즉시 화면을 볼 수 있음)
- Hydration: 브라우저가 자바스크립트 파일을 다운로드하여 정적인 HTML 위에 이벤트 리스너를 입힙니다. 이제 상호작용이 가능해집니다.

#### 서버 컴포넌트 vs 클라이언트 컴포넌트

Next.js 13 버전 (앱 라우터의 등장 ! 두둥탁 !) 부터 역할이 더 세분화되었다고 하네요

| 구분      | 서버 컴포넌트(Server Components)        | 클라이언트 컴포넌트 (Client Components)  |
| --------- | --------------------------------------- | ---------------------------------------- |
| 실행 위치 | 오직 Node.js 서버에서만 실행            | 서버에서 시작해 브라우저에서 완성        |
| 특징      | 브라우저로 전송되는 JS 번들 크기를 줄임 | `useState`, `useEffect` 등 상호작용 가능 |
| 용도      | 데이터 조회, 정적 콘텐츠 표시           | 버튼 클릭, 폼 입력, 애니메이션 등        |

### 그래서 Node.js 서버는 어디에 떠있지?

개발 중일 때는 Next.js가 직접 띄우고, 배포 후에는 선택한 환경에서 Node.js 서버가 상시 가동된다고 하네요

1. 개발 모드 `npm run dev`
   Next.js 프레임워크가 내부적으로 Node.js 서버를 즉시 실행합니다

- 우리가 아는 `localhost:3000`에서 돌아가는 거죠

2. 배포 후 (Self-Hosting 방식)
   직접 서버를 운영하는 경우 (AWS나 EC2, 일반 리눅스 서버 등)

- `npm run build`를 하면 최적화된 결과물이 나오고,
- `npm run start`를 실행하면, Node.js 런타임 위에서 Next.js 서버 애플리케이션이 구동됩니다.
- 이때 서버는 사용자의 요청이 올 때까지 24시간 내내 떠 있는 상태가 됩니다

3. Serverless 방식 (Vercel 등)
   Vercel이나 AWS Lambda 같은 곳에 배포하면 "상시 떠 있는 서버"의 개념이 조금 달라진다고 하네요 !?

- 서버 리스(Server less) : 평소에는 서버가 자고 있다가, 누가 접속하면 후다닥 깨서 그때만 잠깐 Node.js 환경이 생성되서 리액트를 렌더링하고 다시 자러 간다고 합니다.
- 관리할 서버가 따로 없어서 편리하지만, 내부적으로 여전히 Node.js 엔진이 돌아가며 렌더링을 처리합니다.

#### 💡 정리

Next.js는 단순히 라이브러리가 아니라 서버 기능을 포함한 프레임워크입니다. 그래서 Next.js를 실행한다는 것 자체가 리액트를 그려줄 Node.js 서버를 가동시킨다는 의미죠
